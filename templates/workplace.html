{% extends "base.html" %}

{% block title %}AI Workplace - Adversarial AI{% endblock %}

{% block content %}
<div class="container workplace-container">
    
    <div class="row mb-4">
        <div class="col-12">
            <div class="topic-header text-center">
                <div class="pixel-gavel mb-3">
                    <i class="fas fa-gavel bounce-icon"></i>
                </div>
                <h2 class="pixel-topic-title">{{ topic }}</h2>
                <p class="pixel-subtitle">AI-Generated Legal Arguments</p>
                <div class="topic-actions mt-3">
                    <a href="{{ url_for('index') }}" class="btn pixel-btn-secondary me-2">
                        <i class="fas fa-arrow-left me-2"></i>New Debate
                    </a>
                    <button class="btn pixel-btn-outline" onclick="window.print()">
                        <i class="fas fa-print me-2"></i>Print
                    </button>
                </div>
            </div>
        </div>
    </div>

    
    <div class="row arguments-container d-none d-lg-flex">
        <div class="split-scroll-container">
            
            <div class="split-column pro-scroll me-2">
                <div class="argument-card pro-card shadow-lg ">
                    <div class="card-header pro-header">
                        <div class="d-flex align-items-center justify-content-between p-3">
                            <h3 class="card-title mb-0">
                                <i class="fas fa-thumbs-up me-2"></i>
                                Pro Arguments
                            </h3>
                            <div class="argument-badge pro-badge">
                                <i class="fas fa-check-circle me-1"></i>Supporting
                            </div>
                        </div>
                    </div>
                    <div class="card-body pro-body argument-scroll" id="pro-scroll-content">
                        <div class="argument-content typewriter-text" id="pro-content">
                            {{ pro_argument }}
                        </div>
                        <div class="argument-footer mt-4">
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-robot me-1"></i>
                                    Generated by AI
                                </small>
                                <button class="btn btn-sm pixel-btn-pro" onclick="copyToClipboard('pro-content')">
                                    <i class="fas fa-copy me-1"></i>Copy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            
            <div class="split-column con-scroll ms-2">
                <div class="argument-card con-card shadow-lg ">
                    <div class="card-header con-header">
                        <div class="d-flex align-items-center justify-content-between p-3">
                            <h3 class="card-title mb-0">
                                <i class="fas fa-thumbs-down me-2"></i>
                                Con Arguments
                            </h3>
                            <div class="argument-badge con-badge">
                                <i class="fas fa-times-circle me-1"></i>Opposing
                            </div>
                        </div>
                    </div>
                    <div class="card-body con-body argument-scroll" id="con-scroll-content">
                        <div class="argument-content typewriter-text" id="con-content">
                            {{ con_argument }}
                        </div>
                        <div class="argument-footer mt-4">
                            <div class="d-flex justify-content-between align-items-center">
                                <small class="text-muted">
                                    <i class="fas fa-robot me-1"></i>
                                    Generated by AI
                                </small>
                                <button class="btn btn-sm pixel-btn-con" onclick="copyToClipboard('con-content')">
                                    <i class="fas fa-copy me-1"></i>Copy
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    
    <div class="row d-lg-none mobile-toggle-container">
        <div class="col-12">
            <div class="mobile-argument-toggle">
                <div class="btn-group w-100 mb-3" role="group">
                    <button type="button" class="btn pixel-btn-pro active" onclick="showMobileArgument('pro')">
                        <i class="fas fa-thumbs-up me-2"></i>Pro Arguments
                    </button>
                    <button type="button" class="btn pixel-btn-con" onclick="showMobileArgument('con')">
                        <i class="fas fa-thumbs-down me-2"></i>Con Arguments
                    </button>
                </div>
                
                <div id="mobile-pro-content" class="mobile-argument-content active">
                    <div class="argument-card pro-card shadow">
                        <div class="card-body">
                            <h4 class="pixel-card-title text-center mb-3">
                                <i class="fas fa-thumbs-up me-2"></i>Pro Arguments
                            </h4>
                            <div class="argument-content">
                                {{ pro_argument }}
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="mobile-con-content" class="mobile-argument-content">
                    <div class="argument-card con-card shadow">
                        <div class="card-body">
                            <h4 class="pixel-card-title text-center mb-3">
                                <i class="fas fa-thumbs-down me-2"></i>Con Arguments
                            </h4>
                            <div class="argument-content">
                                {{ con_argument }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

   
    <div class="row mt-4">
        <div class="col-12 text-center">
            <div class="workplace-actions">
                <a href="{{ url_for('index') }}" class="btn pixel-btn-primary btn-lg me-3">
                    <i class="fas fa-plus me-2"></i>Generate New Debate
                </a>
                <a href="{{ url_for('history') }}" class="btn pixel-btn-secondary btn-lg">
                    <i class="fas fa-history me-2"></i>View History
                </a>
            </div>
        </div>
    </div>
</div>


<style>
.split-scroll-container {
    height: 500px;
    display: flex;
    gap: 20px;
}

.split-column {
    flex: 1;
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.argument-scroll {
    flex: 1;
    overflow-y: auto;
    padding: 1rem;
    height: 100%;
    background-color: #f9f9f9;
    border-radius: 0 0 0.5rem 0.5rem;
}


.argument-scroll::-webkit-scrollbar {
    width: 6px;
}
.argument-scroll::-webkit-scrollbar-thumb {
    background-color: #ccc;
    border-radius: 3px;
}
</style>
{% endblock %}

{% block scripts %}
<script>

function copyToClipboard(elementId) {
    const element = document.getElementById(elementId);
    const text = element.innerText;
    navigator.clipboard.writeText(text).then(() => {
        const btn = event.target.closest('button');
        const originalHTML = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check me-1"></i>Copied!';
        btn.disabled = true;
        setTimeout(() => {
            btn.innerHTML = originalHTML;
            btn.disabled = false;
        }, 2000);
    }).catch(err => {
        console.error('Could not copy text: ', err);
    });
}


function showMobileArgument(type) {
    const buttons = document.querySelectorAll('.mobile-argument-toggle .btn');
    buttons.forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    const contents = document.querySelectorAll('.mobile-argument-content');
    contents.forEach(content => content.classList.remove('active'));
    document.getElementById(`mobile-${type}-content`).classList.add('active');
}


function typeWriterEffect(elementId, speed = 50) {
    const element = document.getElementById(elementId);
    if (!element || element.dataset.typed === 'true') return;
    const text = element.innerText;
    element.innerHTML = '';
    element.dataset.typed = 'true';
    let i = 0;
    function typeWriter() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(typeWriter, speed);
        }
    }
    setTimeout(typeWriter, 500);
}


document.addEventListener('DOMContentLoaded', function() {
    const argumentsContainer = document.querySelector('.arguments-container');
    if (argumentsContainer) {
        setTimeout(() => {
            argumentsContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 500);
    }
    const cards = document.querySelectorAll('.argument-card');
    cards.forEach((card, index) => {
        card.style.opacity = '0';
        card.style.transform = 'translateY(20px)';
        setTimeout(() => {
            card.style.transition = 'all 0.6s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, 200 + (index * 200));
    });

   
    const proScroll = document.getElementById('pro-scroll-content');
    const conScroll = document.getElementById('con-scroll-content');
    let isSyncingPro = false, isSyncingCon = false;

    if (proScroll && conScroll) {
        proScroll.addEventListener('scroll', () => {
            if (!isSyncingPro) {
                isSyncingCon = true;
                conScroll.scrollTop = proScroll.scrollTop;
            }
            isSyncingPro = false;
        });

        conScroll.addEventListener('scroll', () => {
            if (!isSyncingCon) {
                isSyncingPro = true;
                proScroll.scrollTop = conScroll.scrollTop;
            }
            isSyncingCon = false;
        });
    }
});


window.addEventListener('beforeprint', function() {
    document.body.classList.add('printing');
});
window.addEventListener('afterprint', function() {
    document.body.classList.remove('printing');
});
</script>
{% endblock %}
